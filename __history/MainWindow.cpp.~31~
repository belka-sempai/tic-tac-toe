//---------------------------------------------------------------------------

#include <vcl.h>
#include <iostream>
#pragma hdrstop

#include "MainWindow.h"
#include "Settings.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
TForm2 *Form2;

int Cell[3][3];
int Cell4[4][4];
int win=0;
int Turns=0;

class Player
{
private:
	int PlayerNum;
	int Comp;
	int Var1, Var3, Var5, Var6, Var7;
public:
	Player()
		{
		PlayerNum = 1;
		Comp = 0;
		Var1 = 0;
		Var3 = 0;
		Var5 = 0;
		Var6 = 0;
		Var7 = 0;
		}
	void ChangePlayer()
		{
		if (PlayerNum == 1)
			PlayerNum = 2;
		else
			PlayerNum = 1;
		}
	void ShowPlayerNumber()
		{
		if (Comp == 0)
			{
			Form1->Label2->Caption="Ходит игрок ";
			if (PlayerNum==1)
				{
				Form1->Label3->Caption="1";
				}
			else
			if (PlayerNum==2)
				{
				Form1->Label3->Caption="2";
				}
			}
		if (Comp == 1)
			{
			if (PlayerNum==1)
				{
				Form1->Label3->Caption=" ";
				Form1->Label2->Caption="Ходит компьютер";
				}
			else
			if (PlayerNum==2)
				{
				Form1->Label2->Caption="Ходит игрок ";
				Form1->Label3->Caption="2";
				}
			}
		}
	void FillCell(TButton * Cell, int & CellFromMas)
		{
		CellFromMas = PlayerNum;
		if (PlayerNum == 1)
			{
			Cell->Caption="x";
			}
		if (PlayerNum == 2)
			{
			Cell->Caption="o";
			}
		Turns++;
		}
	void CompPlayer1()
		{
		if (Turns == 0)
			{
			Form1->C22->Caption="x";
			Cell[1][1]=1;
			}
		else
		if (Turns == 2)
			{
			if (Cell[0][0] == 2)
				{
				Form1->C33->Caption="x";
				Cell[2][2]=1;
				Var1 = 1;
				}
			else
			if (Cell[0][1] == 2)
				{
				Form1->C31->Caption="x";
				Cell[2][0]=1;
				Var1 = 2;
				}
			else
			if (Cell[0][2] == 2)
				{
				Form1->C31->Caption="x";
				Cell[2][0]=1;
				Var1 = 3;
				}
			else
			if (Cell[1][0] == 2)
				{
				Form1->C33->Caption="x";
				Cell[2][2]=1;
				Var1 = 4;
				}
			else
			if (Cell[1][2] == 2)
				{
				Form1->C11->Caption="x";
				Cell[0][0]=1;
				Var1 = 5;
				}
			else
			if (Cell[2][0] == 2)
				{
				Form1->C13->Caption="x";
				Cell[0][2]=1;
				Var1 = 6;
				}
			else
			if (Cell[2][1] == 2)
				{
				Form1->C13->Caption="x";
				Cell[0][2]=1;
				Var1 = 7;
				}
            else
			if (Cell[2][2] == 2)
				{
				Form1->C11->Caption="x";
				Cell[0][0]=1;
				Var1 = 8;
				}
			}
		else
		if (Turns == 4)
			{
			if (Var1 == 1)
				{
				if (Cell[0][1] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[0][2] == 2)
					{
					Cell[0][1] = 1;
					Form1->C12->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[1][0] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[1][2] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[2][0] == 2)
					{
					Cell[1][0] = 1;
					Form1->C21->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[2][1] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 6;
					}
				}
			else
			if (Var1 == 2)
				{
				if (Cell[0][0] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[0][2] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[1][0] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[1][2] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[2][1] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[2][2] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 6;
					}
				}
			else
			if (Var1 == 3)
				{
				if (Cell[1][2] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[2][2] == 2)
					{
					Cell[1][2] = 1;
					Form1->C23->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[0][1] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[2][1] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[0][0] == 2)
					{
					Cell[0][1] = 1;
					Form1->C12->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[1][0] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 6;
					}
				}
			else
			if (Var1 == 4)
				{
				if (Cell[2][0] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[0][0] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[2][1] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[0][1] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[1][2] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[0][2] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 6;
					}
				}
			else
			if (Var1 == 5)
				{
				if (Cell[0][2] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[2][2] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[0][1] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[2][1] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[2][0] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[2][0] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 6;
					}
				}
			else
			if (Var1 == 6)
				{
				if (Cell[1][0] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[0][0] == 2)
					{
					Cell[1][0] = 1;
					Form1->C21->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[2][1] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[0][1] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[2][2] == 2)
					{
					Cell[2][1] = 1;
					Form1->C32->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[1][2] == 2)
					{
					Cell[0][0] = 1;
					Form1->C11->Caption="x";
					Var3 = 6;
					}
				}
			else
			if (Var1 == 7)
				{
				if (Cell[2][2] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[2][0] == 2)
					{
					Cell[2][2] = 1;
					Form1->C33->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[1][2] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[1][0] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[0][1] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[0][0] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 6;
					}
				}
			else
			if (Var1 == 8)
				{
				if (Cell[2][1] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 1;
					}
				else
				if (Cell[2][0] == 2)
					{
					Cell[2][1] = 1;
					Form1->C32->Caption="x";
					Var3 = 2;
					}
				else
				if (Cell[1][2] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 3;
					}
				else
				if (Cell[1][0] == 2)
					{
					Cell[0][2] = 1;
					Form1->C13->Caption="x";
					Var3 = 4;
					}
				else
				if (Cell[0][2] == 2)
					{
					Cell[1][2] = 1;
					Form1->C23->Caption="x";
					Var3 = 5;
					}
				else
				if (Cell[0][1] == 2)
					{
					Cell[2][0] = 1;
					Form1->C31->Caption="x";
					Var3 = 6;
					}
				}
			}
		else
		if (Turns == 6)
			{
			if (Var1==1)
				{
				if (Var3==1)
					{
					if (Cell[1][0] == 2)
						{
						int r = rand() % 2 + 1;
						if (r == 1)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						Var5 = 1;
						}
					else
					if (Cell[1][2] == 2)
						{
						Cell[2][0] = 1;
						Form1->C31->Caption="x";
						Var5 = 2;
						}
					else
					if (Cell[2][0] == 2)
						{
						Cell[1][2] = 1;
						Form1->C23->Caption="x";
						Var5 = 3;
						}
					else
					if (Cell[2][1] == 2)
						{
						int r = rand() % 2 + 1;
						if (r == 1)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						Var5 = 4;
						}
					}
				else
				if (Var3==2)
					{
					if (Cell[1][0] == 2)
						{
						Cell[2][1] = 1;
						Form1->C32->Caption="x";
						}
					else
					if (Cell[1][2] == 2)
						{
						Cell[2][1] = 1;
						Form1->C32->Caption="x";
						}
					else
					if (Cell[2][0] == 2)
						{
						Cell[2][1] = 1;
						Form1->C32->Caption="x";
						}
					else
					if (Cell[2][1] == 2)
						{
						int r = rand()%3 + 1;
						if (r == 1)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							Var6 = 1;
							}
						else
						if (r == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							Var6 = 2;
							}
						else
						if (r == 3)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							Var6 = 3;
							}
						}
					}
				else
				if (Var3==3)
					{
					if (Cell[0][1] == 2)
						{
						int r = rand()%2 + 1;
						if (r == 1)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					else
					if (Cell[2][1] == 2)
						{
						Cell[0][2] = 1;
						Form1->C13->Caption="x";
						}
					else
					if (Cell[0][2] == 2)
						{
						Cell[2][1] = 1;
						Form1->C32->Caption="x";
						}
					else
					if (Cell[1][2] == 2)
						{
						int r = rand()%2 + 1;
						if (r == 1)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					}
				else
				if (Var3==4)
					{
					if (Cell[0][1] == 2)
						{
						int r = rand()%2 + 1;
						if (r == 1)
							{
                            Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					else
					if (Cell[0][2] == 2)
						{
                        Cell[2][1] = 1;
						Form1->C32->Caption="x";
						}
					else
					if (Cell[1][0] == 2)
						{
                        int r = rand()%2 + 1;
						if (r == 1)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					else
					if (Cell[2][1] == 2)
						{
                        Cell[0][2] = 1;
						Form1->C13->Caption="x";
						}
					}
				else
				if (Var3==5)
					{
					if (Cell[2][1] == 2)
						{
						Cell[1][2] = 1;
						Form1->C23->Caption="x";
						}
					else
					if (Cell[0][2] == 2)
						{
                        Cell[1][2] = 1;
						Form1->C23->Caption="x";
						}
					else
					if (Cell[0][1] == 2)
						{
						Cell[1][2] = 1;
						Form1->C23->Caption="x";
						}
					else
					if (Cell[1][2] == 2)
						{
						int r = rand()%3 + 1;
						if (r == 1)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							Var6 = 1;
							}
						else
						if (r == 2)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							Var6 = 2;
							}
						else
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							Var6 = 3;
							}
						}
					}
				else
				if (Var3==6)
					{
					if (Cell[0][1] == 2)
						{
						int r = rand()%2 + 1;
						if (r == 1)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						else
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						}
					else
					if (Cell[1][2] == 2)
						{
						Cell[2][0] = 1;
						Form1->C31->Caption="x";
						}
					else
					if (Cell[1][0] == 2)
						{
						int r = rand()%2 + 1;
						if (r == 1)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						else
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						}
					else
					if (Cell[2][0] == 2)
						{
						Cell[1][2] = 1;
						Form1->C23->Caption="x";
						}
					}
				}
			else
			if (Var1==2)
				{
				if (Var3 == 2)
					{
					if (Cell[1][0] == 2)
						{
						Cell[2][2] = 1;
						Form1->C33->Caption="x";
						}
					else
					if (Cell[1][2] == 2)
						{
						int r = rand()%2 + 1;
						if (r == 1)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
							{
                            Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						}
					else
					if (Cell[2][1] == 2)
						{
						int r = rand()%2 + 1;
						if (r == 1)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						}
					else
					if (Cell[1][2] == 2)
						{
						Cell[1][0] = 1;
						Form1->C21->Caption="x";
						}
					}
				}
				else
				if (Var1 == 3)
					{
					if (Var3==1)
						{
						if (Cell[0][1] == 2)
							{
							int r = rand() % 2 + 1;
							if (r == 1)
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								}
							else
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							Var5 = 1;
							}
						else
						if (Cell[2][1] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							Var5 = 2;
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[2][1] = 1;
							Form1->C23->Caption="x";
							Var5 = 3;
							}
						else
						if (Cell[1][0] == 2)
							{
							int r = rand() % 2 + 1;
							if (r == 1)
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								}
							else
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							Var5 = 4;
							}
						}
					else
					if (Var3==2)
						{
						if (Cell[0][1] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							int r = rand()%3 + 1;
							if (r == 1)
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								Var6 = 1;
								}
							else
							if (r == 2)
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								Var6 = 2;
								}
							else
							if (r == 3)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								Var6 = 3;
								}
							}
						}
					else
					if (Var3==3)
						{
						if (Cell[1][2] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								}
							else
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								}
							else
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							}
						}
					else
					if (Var3==4)
						{
						if (Cell[1][2] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							else
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								}
							else
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						}
					else
					if (Var3==5)
						{
						if (Cell[1][0] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						else
						if (Cell[1][2] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							int r = rand()%3 + 1;
							if (r == 1)
								{
								Cell[1][2] = 1;
								Form1->C23->Caption="x";
								Var6 = 1;
								}
							else
							if (r == 2)
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								Var6 = 2;
								}
							else
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								Var6 = 3;
								}
							}
						}
					else
					if (Var3==6)
						{
						if (Cell[1][2] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							else
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								}
							}
						else
						if (Cell[2][1] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							else
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								}
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					}
				else
				if (Var1 == 4)
					{
					if (Var3 == 2)
						{
						if (Cell[2][1] == 2)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								}
							else
								{
								Cell[0][2] = 1;
								Form1->C13->Caption="x";
								}
							}
						else
						if (Cell[1][2] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								}
							else
								{
								Cell[0][2] = 1;
								Form1->C13->Caption="x";
								}
							}
						else
						if (Cell[0][2] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					}
				else
				if (Var1 == 5)
					{
					if (Var3 == 2)
						{
						if (Cell[0][1] == 2)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							else
								{
								Cell[2][0] = 1;
								Form1->C31->Caption="x";
								}
							}
						else
						if (Cell[1][0] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							else
								{
								Cell[2][0] = 1;
								Form1->C31->Caption="x";
								}
							}
						else
						if (Cell[2][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						}
					}
				else
				if (Var1 == 6)
					{
					if (Var3==1)
						{
						if (Cell[2][1] == 2)
							{
							int r = rand() % 2 + 1;
							if (r == 1)
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							else
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								}
							Var5 = 1;
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							Var5 = 2;
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							Var5 = 3;
							}
						else
						if (Cell[1][2] == 2)
							{
							int r = rand() % 2 + 1;
							if (r == 1)
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							else
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								}
							Var5 = 4;
							}
						}
					else
					if (Var3==2)
						{
						if (Cell[2][1] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[1][2] == 2)
							{
							int r = rand()%3 + 1;
							if (r == 1)
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								Var6 = 1;
								}
							else
							if (r == 2)
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								Var6 = 2;
								}
							else
							if (r == 3)
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								Var6 = 3;
								}
							}
						}
					else
					if (Var3==3)
						{
						if (Cell[1][0] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							else
								{
								Cell[1][2] = 1;
								Form1->C23->Caption="x";
								}
							}
						else
						if (Cell[1][2] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							else
								{
								Cell[1][2] = 1;
								Form1->C23->Caption="x";
								}
							}
						}
					else
					if (Var3==4)
						{
						if (Cell[1][0] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							else
								{
								Cell[1][2] = 1;
								Form1->C23->Caption="x";
								}
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								}
							else
								{
								Cell[1][2] = 1;
								Form1->C23->Caption="x";
								}
							}
						else
						if (Cell[1][2] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							}
						}
					else
					if (Var3==5)
						{
						if (Cell[1][2] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							int r = rand()%3 + 1;
							if (r == 1)
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								Var6 = 1;
								}
							else
							if (r == 2)
								{
								Cell[0][0] = 1;
								Form1->C11->Caption="x";
								Var6 = 2;
								}
							else
								{
								Cell[1][2] = 1;
								Form1->C23->Caption="x";
								Var6 = 3;
								}
							}
						}
					else
					if (Var3==6)
						{
						if (Cell[1][0] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								}
							else
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][2] = 1;
								Form1->C33->Caption="x";
								}
							else
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						}
					}
				else
				if (Var1 == 7)
					{
					if (Cell[2][2] == 2)
						{
						Cell[2][0] = 1;
						Form1->C31->Caption="x";
						Var3 = 1;
						}
					else
					if (Cell[2][0] == 2)
						{
						Cell[2][2] = 1;
						Form1->C33->Caption="x";
						Var3 = 2;
						}
					else
					if (Cell[1][2] == 2)
						{
						Cell[2][0] = 1;
						Form1->C31->Caption="x";
						Var3 = 3;
						}
					else
					if (Cell[1][0] == 2)
						{
						Cell[2][0] = 1;
						Form1->C31->Caption="x";
						Var3 = 4;
						}
					else
					if (Cell[0][1] == 2)
						{
						Cell[2][0] = 1;
						Form1->C31->Caption="x";
						Var3 = 5;
						}
					else
					if (Cell[0][0] == 2)
						{
						Cell[2][0] = 1;
						Form1->C31->Caption="x";
						Var3 = 6;
						}
					}
				else
				if (Var1 == 8)
					{
					if (Var3==1)
						{
						if (Cell[1][2] == 2)
							{
							int r = rand() % 2 + 1;
							if (r == 1)
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							else
								{
								Cell[0][2] = 1;
								Form1->C13->Caption="x";
								}
							Var5 = 1;
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							Var5 = 2;
							}
						else
						if (Cell[0][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							Var5 = 3;
							}
						else
						if (Cell[0][1] == 2)
							{
							int r = rand() % 2 + 1;
							if (r == 1)
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							else
								{
								Cell[0][2] = 1;
								Form1->C13->Caption="x";
								}
							Var5 = 4;
							}
						}
					else
					if (Var3==2)
						{
						if (Cell[1][2] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[0][2] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							int r = rand()%3 + 1;
							if (r == 1)
								{
								Cell[1][2] = 1;
								Form1->C23->Caption="x";
								Var6 = 1;
								}
							else
							if (r == 2)
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								Var6 = 2;
								}
							else
							if (r == 3)
								{
								Cell[0][2] = 1;
								Form1->C13->Caption="x";
								Var6 = 3;
								}
							}
						}
					else
					if (Var3==3)
						{
						if (Cell[2][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][0] = 1;
								Form1->C31->Caption="x";
								}
							else
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						else
						if (Cell[2][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][0] = 1;
								Form1->C31->Caption="x";
								}
							else
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							}
						}
					else
					if (Var3==4)
						{
						if (Cell[2][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][0] = 1;
								Form1->C31->Caption="x";
								}
							else
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							}
						else
						if (Cell[2][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[1][2] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[2][0] = 1;
								Form1->C31->Caption="x";
								}
							else
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								}
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						}
					else
					if (Var3==5)
						{
						if (Cell[0][1] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[2][0] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							int r = rand()%3 + 1;
							if (r == 1)
								{
								Cell[2][1] = 1;
								Form1->C32->Caption="x";
								Var6 = 1;
								}
							else
							if (r == 2)
								{
								Cell[2][0] = 1;
								Form1->C31->Caption="x";
								Var6 = 2;
								}
							else
								{
								Cell[0][1] = 1;
								Form1->C12->Caption="x";
								Var6 = 3;
								}
							}
						}
					else
					if (Var3==6)
						{
						if (Cell[2][1] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[0][2] = 1;
								Form1->C13->Caption="x";
								}
							else
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
						if (Cell[1][2] == 2)
							{
							int r = rand()%2 + 1;
							if (r == 1)
								{
								Cell[1][2] = 1;
								Form1->C13->Caption="x";
								}
							else
								{
								Cell[1][0] = 1;
								Form1->C21->Caption="x";
								}
							}
						else
						if (Cell[0][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						}
					}
			}
		else
		if (Turns == 8)
			{
			if (Var1 == 1)
				{
				if (Var3 == 2)
					{
					if (Var6 == 1)
						{
						if (Cell[1][2] == 2)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						else
						if (Cell[2][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[1][0] == 2)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						else
						if (Cell[2][0] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[1][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[1][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						}
					}
				else
				if (Var3 == 5)
					{
					if (Var6 == 1)
						{
						if (Cell[0][2] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[0][1] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[0][1] == 2)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
						if (Cell[0][2] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						}
					}
				}
			else
			if (Var1 == 3)
				{
				if (Var3 == 2)
					{
					if (Var6 == 1)
						{
						if (Cell[2][1] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[0][1] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[0][1] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						else
						if (Cell[2][1] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						}
					}
				else
				if (Var3 == 5)
					{
					if (Var6 == 1)
						{
						if (Cell[2][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[1][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[1][2] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						}
					}
				}
			else
			if (Var1 == 6)
				{
                if (Var3 == 2)
					{
					if (Var6 == 1)
						{
						if (Cell[0][1] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[2][1] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[2][1] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					}
				else
				if (Var3 == 5)
					{
					if (Var6 == 1)
						{
						if (Cell[0][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[1][2] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[1][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						else
						if (Cell[1][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[1][0] == 2)
							{
							Cell[0][0] = 1;
							Form1->C11->Caption="x";
							}
						else
						if (Cell[0][0] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						}
					}
				}
			else
			if (Var1 == 8)
				{
                if (Var3 == 2)
					{
					if (Var6 == 1)
						{
						if (Cell[1][0] == 2)
							{
							Cell[2][2] = 1;
							Form1->C33->Caption="x";
							}
						else
						if (Cell[2][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[1][2] == 2)
							{
							Cell[0][2] = 1;
							Form1->C13->Caption="x";
							}
						else
						if (Cell[0][2] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[1][2] == 2)
							{
							Cell[1][0] = 1;
							Form1->C21->Caption="x";
							}
						else
						if (Cell[1][0] == 2)
							{
							Cell[1][2] = 1;
							Form1->C23->Caption="x";
							}
						}
					}
				else
				if (Var3 == 5)
					{
					if (Var6 == 1)
						{
						if (Cell[2][0] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						}
					else
					if (Var6 == 2)
						{
						if (Cell[2][1] == 2)
							{
							Cell[0][1] = 1;
							Form1->C12->Caption="x";
							}
						else
						if (Cell[0][1] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					else
					if (Var6 == 3)
						{
						if (Cell[2][1] == 2)
							{
							Cell[2][0] = 1;
							Form1->C31->Caption="x";
							}
						else
						if (Cell[2][0] == 2)
							{
							Cell[2][1] = 1;
							Form1->C32->Caption="x";
							}
						}
					}
				}
			}
	Turns++;
	}
	void Reset()
		{
        Var1 = 0;
		Var3 = 0;
		Var5 = 0;
		Var6 = 0;
		Var7 = 0;
		PlayerNum = 1;
		}
	int GetComp()
		{
		return Comp;
		}
	void SetComp(int C)
		{
		Comp = C;
		}
	int GetPlayer()
		{
		return PlayerNum;
		}
};
Player play;



void WinCheck();
void FailCheck(int Dif);
void WinCheck4();

//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TForm1::FormCreate(TObject *Sender)
{
Form1->CompSetting = 0;
Form1->Label4->Visible=false;
Form1->Difficulty=3;
play.ShowPlayerNumber();
Form1->Color=TColor(0xe4dde4);
Form1->Label1->Font->Color=TColor(0x5938a8);
Form1->Panel1->Color=TColor(0xb5a6c8);
Form1->Panel2->Color=TColor(0xb5a6c8);
Form1->Panel2->Visible=false;

for (int i=0; i<3; i++)
	{
	for (int j=0; j < 3; j++)
		{
		Cell[i][j]=0;
		}
	}
for (int i=0; i<4; i++)
	{
	for (int j=0; j < 4; j++)
		{
		Cell4[i][j]=0;
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::QuitClick(TObject *Sender)
{
if (MessageDlg("Вы уверены, что хотите выйти?", mtConfirmation, TMsgDlgButtons() << mbYes << mbNo,0) == mrYes)
	Close();
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C11Click(TObject *Sender)
{
if (win == 0)
	{
	if (C11->Caption=="x" || C11->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->C11, Cell[0][0]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C12Click(TObject *Sender)
{
if (win == 0)
	{
	if (C12->Caption=="x" || C12->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->C12, Cell[0][1]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);

	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C13Click(TObject *Sender)
{
if (win == 0)
	{
	if (C13->Caption=="x" || C13->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->C13, Cell[0][2]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C21Click(TObject *Sender)
{
if (win == 0)
	{
	if (C21->Caption=="x" || C21->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->C21, Cell[1][0]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C22Click(TObject *Sender)
{
if (win == 0)
	{
	if (C22->Caption=="x" || C22->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->C22, Cell[1][1]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C23Click(TObject *Sender)
{
if (win == 0)
	{
	if (C23->Caption=="x" || C23->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->C23, Cell[1][2]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C31Click(TObject *Sender)
{
if (win == 0)
	{
	if (C31->Caption=="x" || C31->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->C31, Cell[2][0]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C32Click(TObject *Sender)
{
if (win == 0)
	{
	if (C32->Caption=="x" || C32->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->C32, Cell[2][1]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------
void __fastcall TForm1::C33Click(TObject *Sender)
{
if (win == 0)
	{
	if (C33->Caption=="x" || C33->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->C33, Cell[2][2]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck();
	FailCheck(Form1->Difficulty);
	if (play.GetComp()==1 && play.GetPlayer() == 1)
		{
		play.ShowPlayerNumber();
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		WinCheck();
		FailCheck(Form1->Difficulty);
		}
	}
}
//---------------------------------------------------------------------------

void WinCheck()
{
if (Cell[0][0]!=0)
	{
		if (Cell[0][0]==Cell[0][1] && Cell[0][1]==Cell[0][2])
			{
				if (Cell[0][0]==1)
					{
					win=1;
					}
				else
				if (Cell[0][0]==2)
					{
					win=2;
					}
			Form1->C11->Font->Style=Form1->C11->Font->Style<<fsStrikeOut;
			Form1->C12->Font->Style=Form1->C12->Font->Style<<fsStrikeOut;
			Form1->C13->Font->Style=Form1->C13->Font->Style<<fsStrikeOut;
			}
		else
		if (Cell[0][0]==Cell[1][0] && Cell[1][0]==Cell[2][0])
			{
				if (Cell[0][0]==1)
					{
					win=1;
					}
				else
				if (Cell[0][0]==2)
					{
					win=2;
					}
			Form1->C11->Font->Style=Form1->C11->Font->Style<<fsStrikeOut;
			Form1->C21->Font->Style=Form1->C21->Font->Style<<fsStrikeOut;
			Form1->C31->Font->Style=Form1->C31->Font->Style<<fsStrikeOut;
			}
		else
		if (Cell[0][0]==Cell[1][1] && Cell[1][1]==Cell[2][2])
			{
				if (Cell[0][0]==1)
					{
					win=1;
					}
				else
				if (Cell[0][0]==2)
					{
					win=2;
					}
			Form1->C11->Font->Style=Form1->C11->Font->Style<<fsStrikeOut;
			Form1->C22->Font->Style=Form1->C22->Font->Style<<fsStrikeOut;
			Form1->C33->Font->Style=Form1->C33->Font->Style<<fsStrikeOut;
			}
	}
if (Cell[0][1]!=0)
	{
		if (Cell[0][1]==Cell[1][1] && Cell[1][1]==Cell[2][1])
			{
				if (Cell[0][1]==1)
					{
					win=1;
					}
				else
				if (Cell[0][1]==2)
					{
					win=2;
					}
			Form1->C12->Font->Style=Form1->C12->Font->Style<<fsStrikeOut;
			Form1->C22->Font->Style=Form1->C22->Font->Style<<fsStrikeOut;
			Form1->C32->Font->Style=Form1->C32->Font->Style<<fsStrikeOut;
			}

	}
if (Cell[0][2]!=0)
	{
		if (Cell[0][2]==Cell[1][2] && Cell[1][2]==Cell[2][2])
			{
				if (Cell[0][2]==1)
					{
					win=1;
					}
				else
				if (Cell[0][2]==2)
					{
					win=2;
					}
			Form1->C13->Font->Style=Form1->C13->Font->Style<<fsStrikeOut;
			Form1->C23->Font->Style=Form1->C23->Font->Style<<fsStrikeOut;
			Form1->C33->Font->Style=Form1->C33->Font->Style<<fsStrikeOut;
			}
		else
		if (Cell[0][2]==Cell[1][1] && Cell[1][1]==Cell[2][0])
			{
				if (Cell[0][2]==1)
					{
					win=1;
					}
				else
				if (Cell[0][2]==2)
					{
					win=2;
					}
			Form1->C13->Font->Style=Form1->C13->Font->Style<<fsStrikeOut;
			Form1->C22->Font->Style=Form1->C22->Font->Style<<fsStrikeOut;
			Form1->C31->Font->Style=Form1->C31->Font->Style<<fsStrikeOut;
			}
	}
if (Cell[1][0]!=0)
	{
		if (Cell[1][0]==Cell[1][1] && Cell[1][1]==Cell[1][2])
			{
				if (Cell[1][0]==1)
					{
					win=1;
					}
				else
				if (Cell[1][0]==2)
					{
					win=2;
					}
			Form1->C21->Font->Style=Form1->C21->Font->Style<<fsStrikeOut;
			Form1->C22->Font->Style=Form1->C22->Font->Style<<fsStrikeOut;
			Form1->C23->Font->Style=Form1->C23->Font->Style<<fsStrikeOut;
			}

	}
if (Cell[2][0]!=0)
	{
		if (Cell[2][0]==Cell[2][1] && Cell[2][1]==Cell[2][2])
			{
				if (Cell[2][0]==1)
					{
					win=1;
					}
				else
				if (Cell[2][0]==2)
					{
					win=2;
					}
			Form1->C31->Font->Style=Form1->C31->Font->Style<<fsStrikeOut;
			Form1->C32->Font->Style=Form1->C32->Font->Style<<fsStrikeOut;
			Form1->C33->Font->Style=Form1->C33->Font->Style<<fsStrikeOut;
			}

	}

if (win!=0)
	{
	Form1->Label2->Visible=false;
	Form1->Label3->Visible=false;
	if (play.GetComp() == 1)
		{
        Form1->Label4->Caption="Победил компьютер";
		}
	else
		Form1->Label4->Caption="Победил игрок "+IntToStr(win);
	Form1->Label4->Visible=true;
	}
}

void FailCheck(int Dif)
{
if (Dif==3)
	{
	if (Turns>=9 && win==0)
		{
		Form1->Label2->Visible=false;
		Form1->Label3->Visible=false;
		Form1->Label4->Visible=true;
		Form1->Label4->Caption="Игра окончена, победила дружба!";
		}
	}
else
if (Dif==4)
	{
	if (Turns>=16 && win==0)
		{
		Form1->Label2->Visible=false;
		Form1->Label3->Visible=false;
		Form1->Label4->Visible=true;
		Form1->Label4->Caption="Игра окончена, победила дружба!";
		}
	}

}

void __fastcall TForm1::NewGameClick(TObject *Sender)
{
if (Turns!=0 && ((Turns < 9 && Form1->Difficulty == 3 && win==0) || (Turns < 16 && Form1->Difficulty == 4 && win==0)))
	{
	if (MessageDlg("Вы уверены, что хотите начать новую игру?", mtConfirmation, TMsgDlgButtons() << mbYes << mbNo,0) == mrYes)
		{
		ClearCells();
		play.Reset();
		play.ShowPlayerNumber();
		Form1->Label2->Visible=true;
		Form1->Label3->Visible=true;
		Form1->Label4->Visible=false;
        if (play.GetComp() == 1)
			{
			play.CompPlayer1();
			play.ChangePlayer();
			play.ShowPlayerNumber();
			}
		}
	}
else
	{
	ClearCells();
	play.Reset();
	play.ShowPlayerNumber();
	Form1->Label2->Visible=true;
	Form1->Label3->Visible=true;
	Form1->Label4->Visible=false;
    if (play.GetComp() == 1)
		{
		play.CompPlayer1();
		play.ChangePlayer();
		play.ShowPlayerNumber();
		}
	}
}
//---------------------------------------------------------------------------

void TForm1::ClearCells()
{
Label4->Visible=false;
Label2->Visible=true;
Label3->Visible=true;
for (int i=0; i<3; i++)
	{
	for (int j=0; j < 3; j++)
		{
		Cell[i][j]=0;
		}
	}
Form1->C11->Caption=" ";
Form1->C12->Caption=" ";
Form1->C13->Caption=" ";
Form1->C21->Caption=" ";
Form1->C22->Caption=" ";
Form1->C23->Caption=" ";
Form1->C31->Caption=" ";
Form1->C32->Caption=" ";
Form1->C33->Caption=" ";

for (int i=0; i<4; i++)
	{
	for (int j=0; j < 4; j++)
		{
		Cell4[i][j]=0;
		}
	}
Form1->Cell11->Caption=" ";
Form1->Cell12->Caption=" ";
Form1->Cell13->Caption=" ";
Form1->Cell14->Caption=" ";
Form1->Cell21->Caption=" ";
Form1->Cell22->Caption=" ";
Form1->Cell23->Caption=" ";
Form1->Cell24->Caption=" ";
Form1->Cell31->Caption=" ";
Form1->Cell32->Caption=" ";
Form1->Cell33->Caption=" ";
Form1->Cell34->Caption=" ";
Form1->Cell41->Caption=" ";
Form1->Cell42->Caption=" ";
Form1->Cell43->Caption=" ";
Form1->Cell44->Caption=" ";
win=0;
Turns=0;
play.ShowPlayerNumber();
Form1->C11->Font->Style=Form1->C11->Font->Style>>fsStrikeOut;
Form1->C12->Font->Style=Form1->C12->Font->Style>>fsStrikeOut;
Form1->C13->Font->Style=Form1->C13->Font->Style>>fsStrikeOut;
Form1->C21->Font->Style=Form1->C21->Font->Style>>fsStrikeOut;
Form1->C22->Font->Style=Form1->C22->Font->Style>>fsStrikeOut;
Form1->C23->Font->Style=Form1->C23->Font->Style>>fsStrikeOut;
Form1->C31->Font->Style=Form1->C31->Font->Style>>fsStrikeOut;
Form1->C32->Font->Style=Form1->C32->Font->Style>>fsStrikeOut;
Form1->C33->Font->Style=Form1->C33->Font->Style>>fsStrikeOut;
Form1->Cell11->Font->Style=Form1->Cell11->Font->Style>>fsStrikeOut;
Form1->Cell12->Font->Style=Form1->Cell12->Font->Style>>fsStrikeOut;
Form1->Cell13->Font->Style=Form1->Cell13->Font->Style>>fsStrikeOut;
Form1->Cell14->Font->Style=Form1->Cell14->Font->Style>>fsStrikeOut;
Form1->Cell21->Font->Style=Form1->Cell21->Font->Style>>fsStrikeOut;
Form1->Cell22->Font->Style=Form1->Cell22->Font->Style>>fsStrikeOut;
Form1->Cell23->Font->Style=Form1->Cell23->Font->Style>>fsStrikeOut;
Form1->Cell24->Font->Style=Form1->Cell24->Font->Style>>fsStrikeOut;
Form1->Cell31->Font->Style=Form1->Cell31->Font->Style>>fsStrikeOut;
Form1->Cell32->Font->Style=Form1->Cell32->Font->Style>>fsStrikeOut;
Form1->Cell33->Font->Style=Form1->Cell33->Font->Style>>fsStrikeOut;
Form1->Cell34->Font->Style=Form1->Cell34->Font->Style>>fsStrikeOut;
Form1->Cell41->Font->Style=Form1->Cell41->Font->Style>>fsStrikeOut;
Form1->Cell42->Font->Style=Form1->Cell42->Font->Style>>fsStrikeOut;
Form1->Cell43->Font->Style=Form1->Cell43->Font->Style>>fsStrikeOut;
Form1->Cell44->Font->Style=Form1->Cell44->Font->Style>>fsStrikeOut;
}
void __fastcall TForm1::Button1Click(TObject *Sender)
{
if (Turns!=0 && win==0)
	{
    if (MessageDlg("Завершить текущую игру?", mtConfirmation, TMsgDlgButtons() << mbYes << mbNo,0) == mrYes)
		Form2->Visible=true;
	}
else
	Form2->Visible=true;

}
//---------------------------------------------------------------------------
void TForm1::SetDifficulty(int Dif)
{
	if (Dif==3)
	{
	Form1->Cell11->Visible=false;
	Form1->Cell12->Visible=false;
	Form1->Cell13->Visible=false;
	Form1->Cell14->Visible=false;
	Form1->Cell21->Visible=false;
	Form1->Cell22->Visible=false;
	Form1->Cell23->Visible=false;
	Form1->Cell24->Visible=false;
	Form1->Cell31->Visible=false;
	Form1->Cell32->Visible=false;
	Form1->Cell33->Visible=false;
	Form1->Cell34->Visible=false;
	Form1->Cell41->Visible=false;
	Form1->Cell42->Visible=false;
	Form1->Cell43->Visible=false;
	Form1->Cell44->Visible=false;
	Form1->Panel2->Visible=false;
	Form1->C11->Visible=true;
	Form1->C12->Visible=true;
	Form1->C13->Visible=true;
	Form1->C21->Visible=true;
	Form1->C22->Visible=true;
	Form1->C23->Visible=true;
	Form1->C31->Visible=true;
	Form1->C32->Visible=true;
	Form1->C33->Visible=true;
	Form1->Panel1->Visible=true;
	}
else
	if (Dif==4)
	{
	Form1->Cell11->Visible=true;
	Form1->Cell12->Visible=true;
	Form1->Cell13->Visible=true;
	Form1->Cell14->Visible=true;
	Form1->Cell21->Visible=true;
	Form1->Cell22->Visible=true;
	Form1->Cell23->Visible=true;
	Form1->Cell24->Visible=true;
	Form1->Cell31->Visible=true;
	Form1->Cell32->Visible=true;
	Form1->Cell33->Visible=true;
	Form1->Cell34->Visible=true;
	Form1->Cell41->Visible=true;
	Form1->Cell42->Visible=true;
	Form1->Cell43->Visible=true;
	Form1->Cell44->Visible=true;
	Form1->Panel2->Visible=true;
	Form1->C11->Visible=false;
	Form1->C12->Visible=false;
	Form1->C13->Visible=false;
	Form1->C21->Visible=false;
	Form1->C22->Visible=false;
	Form1->C23->Visible=false;
	Form1->C31->Visible=false;
	Form1->C32->Visible=false;
	Form1->C33->Visible=false;
	Form1->Panel1->Visible=false;

	}
play.SetComp(Form1->CompSetting);
Form1->ClearCells();
play.Reset();
if (play.GetComp() == 1)
	{
    play.CompPlayer1();
	play.ChangePlayer();
	play.ShowPlayerNumber();
	}
}

void WinCheck4()
{
if (Cell4[0][0]!=0)
	{
	if (Cell4[0][0]==Cell4[0][1] && Cell4[0][1]==Cell4[0][2])
		{
		if (Cell4[0][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][0]==2)
			{
			win=2;
			}
		Form1->Cell11->Font->Style=Form1->Cell11->Font->Style<<fsStrikeOut;
		Form1->Cell12->Font->Style=Form1->Cell12->Font->Style<<fsStrikeOut;
		Form1->Cell13->Font->Style=Form1->Cell13->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[0][0]==Cell4[1][1] && Cell4[1][1]==Cell4[2][2])
		{
		if (Cell4[0][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][0]==2)
			{
			win=2;
			}
		Form1->Cell11->Font->Style=Form1->Cell11->Font->Style<<fsStrikeOut;
		Form1->Cell22->Font->Style=Form1->Cell22->Font->Style<<fsStrikeOut;
		Form1->Cell33->Font->Style=Form1->Cell33->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[0][0]==Cell4[1][0] && Cell4[1][0]==Cell4[2][0])
		{
		if (Cell4[0][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][0]==2)
			{
			win=2;
			}
		Form1->Cell11->Font->Style=Form1->Cell11->Font->Style<<fsStrikeOut;
		Form1->Cell21->Font->Style=Form1->Cell21->Font->Style<<fsStrikeOut;
		Form1->Cell31->Font->Style=Form1->Cell31->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[0][1]!=0)
	{
	if (Cell4[0][1]==Cell4[0][2] && Cell4[0][2]==Cell4[0][3])
		{
		if (Cell4[0][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][1]==2)
			{
			win=2;
			}
		Form1->Cell12->Font->Style=Form1->Cell12->Font->Style<<fsStrikeOut;
		Form1->Cell13->Font->Style=Form1->Cell13->Font->Style<<fsStrikeOut;
		Form1->Cell14->Font->Style=Form1->Cell14->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[0][1]==Cell4[1][2] && Cell4[1][2]==Cell4[2][3])
		{
		if (Cell4[0][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][1]==2)
			{
			win=2;
			}
		Form1->Cell12->Font->Style=Form1->Cell12->Font->Style<<fsStrikeOut;
		Form1->Cell23->Font->Style=Form1->Cell23->Font->Style<<fsStrikeOut;
		Form1->Cell34->Font->Style=Form1->Cell34->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[0][1]==Cell4[1][1] && Cell4[1][1]==Cell4[2][1])
		{
		if (Cell4[0][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][1]==2)
			{
			win=2;
			}
		Form1->Cell12->Font->Style=Form1->Cell12->Font->Style<<fsStrikeOut;
		Form1->Cell22->Font->Style=Form1->Cell22->Font->Style<<fsStrikeOut;
		Form1->Cell32->Font->Style=Form1->Cell32->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[0][2]!=0)
	{
	if (Cell4[0][2]==Cell4[1][2] && Cell4[1][2]==Cell4[2][2])
		{
		if (Cell4[0][2]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][2]==2)
			{
			win=2;
			}
		Form1->Cell13->Font->Style=Form1->Cell13->Font->Style<<fsStrikeOut;
		Form1->Cell23->Font->Style=Form1->Cell23->Font->Style<<fsStrikeOut;
		Form1->Cell33->Font->Style=Form1->Cell33->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[0][2]==Cell4[1][1] && Cell4[1][1]==Cell4[2][0])
		{
		if (Cell4[0][2]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][2]==2)
			{
			win=2;
			}
		Form1->Cell13->Font->Style=Form1->Cell13->Font->Style<<fsStrikeOut;
		Form1->Cell22->Font->Style=Form1->Cell22->Font->Style<<fsStrikeOut;
		Form1->Cell31->Font->Style=Form1->Cell31->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[0][3]!=0)
	{
	if (Cell4[0][3]==Cell4[1][3] && Cell4[1][3]==Cell4[2][3])
		{
		if (Cell4[0][3]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][3]==2)
			{
			win=2;
			}
		Form1->Cell14->Font->Style=Form1->Cell14->Font->Style<<fsStrikeOut;
		Form1->Cell24->Font->Style=Form1->Cell24->Font->Style<<fsStrikeOut;
		Form1->Cell34->Font->Style=Form1->Cell34->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[0][3]==Cell4[1][2] && Cell4[1][2]==Cell4[2][1])
		{
		if (Cell4[0][3]==1)
			{
			win=1;
			}
		else
		if (Cell4[0][3]==2)
			{
			win=2;
			}
		Form1->Cell14->Font->Style=Form1->Cell14->Font->Style<<fsStrikeOut;
		Form1->Cell23->Font->Style=Form1->Cell23->Font->Style<<fsStrikeOut;
		Form1->Cell32->Font->Style=Form1->Cell32->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[1][0]!=0)
	{
	if (Cell4[1][0]==Cell4[1][1] && Cell4[1][1]==Cell4[1][2])
		{
		if (Cell4[1][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][0]==2)
			{
			win=2;
			}
		Form1->Cell21->Font->Style=Form1->Cell21->Font->Style<<fsStrikeOut;
		Form1->Cell22->Font->Style=Form1->Cell22->Font->Style<<fsStrikeOut;
		Form1->Cell23->Font->Style=Form1->Cell23->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[1][0]==Cell4[2][1] && Cell4[2][1]==Cell4[3][2])
		{
		if (Cell4[1][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][0]==2)
			{
			win=2;
			}
		Form1->Cell21->Font->Style=Form1->Cell21->Font->Style<<fsStrikeOut;
		Form1->Cell32->Font->Style=Form1->Cell32->Font->Style<<fsStrikeOut;
		Form1->Cell43->Font->Style=Form1->Cell43->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[1][0]==Cell4[2][0] && Cell4[2][0]==Cell4[3][0])
		{
		if (Cell4[1][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][0]==2)
			{
			win=2;
			}
		Form1->Cell21->Font->Style=Form1->Cell21->Font->Style<<fsStrikeOut;
		Form1->Cell31->Font->Style=Form1->Cell31->Font->Style<<fsStrikeOut;
		Form1->Cell41->Font->Style=Form1->Cell41->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[1][1]!=0)
	{
	if (Cell4[1][1]==Cell4[1][2] && Cell4[1][2]==Cell4[1][3])
		{
		if (Cell4[1][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][1]==2)
			{
			win=2;
			}
		Form1->Cell22->Font->Style=Form1->Cell22->Font->Style<<fsStrikeOut;
		Form1->Cell23->Font->Style=Form1->Cell23->Font->Style<<fsStrikeOut;
		Form1->Cell24->Font->Style=Form1->Cell24->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[1][1]==Cell4[2][2] && Cell4[2][2]==Cell4[3][3])
		{
		if (Cell4[1][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][1]==2)
			{
			win=2;
			}
		Form1->Cell22->Font->Style=Form1->Cell22->Font->Style<<fsStrikeOut;
		Form1->Cell33->Font->Style=Form1->Cell33->Font->Style<<fsStrikeOut;
		Form1->Cell44->Font->Style=Form1->Cell44->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[1][1]==Cell4[2][1] && Cell4[2][1]==Cell4[3][1])
		{
		if (Cell4[1][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][1]==2)
			{
			win=2;
			}
		Form1->Cell22->Font->Style=Form1->Cell22->Font->Style<<fsStrikeOut;
		Form1->Cell32->Font->Style=Form1->Cell32->Font->Style<<fsStrikeOut;
		Form1->Cell42->Font->Style=Form1->Cell42->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[1][2]!=0)
	{
	if (Cell4[1][2]==Cell4[2][2] && Cell4[2][2]==Cell4[3][2])
		{
		if (Cell4[1][2]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][2]==2)
			{
			win=2;
			}
		Form1->Cell23->Font->Style=Form1->Cell23->Font->Style<<fsStrikeOut;
		Form1->Cell33->Font->Style=Form1->Cell33->Font->Style<<fsStrikeOut;
		Form1->Cell43->Font->Style=Form1->Cell43->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[1][2]==Cell4[2][1] && Cell4[2][1]==Cell4[3][0])
		{
		if (Cell4[1][2]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][2]==2)
			{
			win=2;
			}
		Form1->Cell23->Font->Style=Form1->Cell23->Font->Style<<fsStrikeOut;
		Form1->Cell32->Font->Style=Form1->Cell32->Font->Style<<fsStrikeOut;
		Form1->Cell41->Font->Style=Form1->Cell41->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[1][3]!=0)
	{
	if (Cell4[1][3]==Cell4[2][3] && Cell4[2][3]==Cell4[3][3])
		{
		if (Cell4[1][3]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][3]==2)
			{
			win=2;
			}
		Form1->Cell24->Font->Style=Form1->Cell24->Font->Style<<fsStrikeOut;
		Form1->Cell34->Font->Style=Form1->Cell34->Font->Style<<fsStrikeOut;
		Form1->Cell44->Font->Style=Form1->Cell44->Font->Style<<fsStrikeOut;
		}
	else
	if (Cell4[1][3]==Cell4[2][2] && Cell4[2][2]==Cell4[3][1])
		{
		if (Cell4[1][3]==1)
			{
			win=1;
			}
		else
		if (Cell4[1][3]==2)
			{
			win=2;
			}
		Form1->Cell24->Font->Style=Form1->Cell24->Font->Style<<fsStrikeOut;
		Form1->Cell33->Font->Style=Form1->Cell33->Font->Style<<fsStrikeOut;
		Form1->Cell42->Font->Style=Form1->Cell42->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[2][0]!=0)
	{
	if (Cell4[2][0]==Cell4[2][1] && Cell4[2][1]==Cell4[2][2])
		{
		if (Cell4[2][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[2][0]==2)
			{
			win=2;
			}
		Form1->Cell31->Font->Style=Form1->Cell31->Font->Style<<fsStrikeOut;
		Form1->Cell32->Font->Style=Form1->Cell32->Font->Style<<fsStrikeOut;
		Form1->Cell33->Font->Style=Form1->Cell33->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[2][1]!=0)
	{
	if (Cell4[2][1]==Cell4[2][2] && Cell4[2][2]==Cell4[2][3])
		{
		if (Cell4[2][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[2][1]==2)
			{
			win=2;
			}
		Form1->Cell32->Font->Style=Form1->Cell32->Font->Style<<fsStrikeOut;
		Form1->Cell33->Font->Style=Form1->Cell33->Font->Style<<fsStrikeOut;
		Form1->Cell34->Font->Style=Form1->Cell34->Font->Style<<fsStrikeOut;
		}
	 }

if (Cell4[3][0]!=0)
	{
	if (Cell4[3][0]==Cell4[3][1] && Cell4[3][1]==Cell4[3][2])
		{
		if (Cell4[3][0]==1)
			{
			win=1;
			}
		else
		if (Cell4[3][0]==2)
			{
			win=2;
			}
		Form1->Cell41->Font->Style=Form1->Cell41->Font->Style<<fsStrikeOut;
		Form1->Cell42->Font->Style=Form1->Cell42->Font->Style<<fsStrikeOut;
		Form1->Cell43->Font->Style=Form1->Cell43->Font->Style<<fsStrikeOut;
		}
	}

if (Cell4[3][1]!=0)
	{
	if (Cell4[3][1]==Cell4[3][2] && Cell4[3][2]==Cell4[3][3])
		{
		if (Cell4[3][1]==1)
			{
			win=1;
			}
		else
		if (Cell4[3][1]==2)
			{
			win=2;
			}
		Form1->Cell42->Font->Style=Form1->Cell42->Font->Style<<fsStrikeOut;
		Form1->Cell43->Font->Style=Form1->Cell43->Font->Style<<fsStrikeOut;
		Form1->Cell44->Font->Style=Form1->Cell44->Font->Style<<fsStrikeOut;
		}
	 }

if (win!=0)
	{
	Form1->Label4->Caption="Победил игрок "+IntToStr(win);
	Form1->Label2->Visible=false;
	Form1->Label3->Visible=false;
	Form1->Label4->Visible=true;
	}
}
void __fastcall TForm1::Cell11Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell11->Caption=="x" || Cell11->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell11, Cell4[0][0]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}

//---------------------------------------------------------------------------

void __fastcall TForm1::Cell12Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell12->Caption=="x" || Cell12->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->Cell12, Cell4[0][1]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}

}

//---------------------------------------------------------------------------

void __fastcall TForm1::Cell13Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell13->Caption=="x" || Cell13->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{play.FillCell(Form1->Cell13, Cell4[0][2]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell14Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell14->Caption=="x" || Cell14->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell14, Cell4[0][3]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell21Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell21->Caption=="x" || Cell21->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell21, Cell4[1][0]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell22Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell22->Caption=="x" || Cell22->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell22, Cell4[1][1]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell23Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell23->Caption=="x" || Cell23->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell23, Cell4[1][2]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell24Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell24->Caption=="x" || Cell24->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell24, Cell4[1][3]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell31Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell31->Caption=="x" || Cell31->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell31, Cell4[2][0]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell32Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell32->Caption=="x" || Cell32->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell32, Cell4[2][1]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell33Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell33->Caption=="x" || Cell33->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell33, Cell4[2][2]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell34Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell34->Caption=="x" || Cell34->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell34, Cell4[2][3]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell41Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell41->Caption=="x" || Cell41->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell41, Cell4[3][0]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell42Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell42->Caption=="x" || Cell42->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell42, Cell4[3][1]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell43Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell43->Caption=="x" || Cell43->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell43, Cell4[3][2]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Cell44Click(TObject *Sender)
{
if (win == 0)
	{
	if (Cell44->Caption=="x" || Cell44->Caption=="o")
		{
		ShowMessage("Ячейка занята!");
		}
	else
		{
		play.FillCell(Form1->Cell44, Cell4[3][3]);
		play.ChangePlayer();
		}
	play.ShowPlayerNumber();
	WinCheck4();
	FailCheck(Form1->Difficulty);
	}
}
//---------------------------------------------------------------------------

